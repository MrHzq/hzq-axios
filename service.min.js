import axios from 'axios';export default axiosConfig=>{let {baseURL}=axiosConfig;if(process.env.PATH_ENV==='prod'){baseURL=axiosConfig.prodURL||baseURL;}else if(process.env.PATH_ENV==='pre'){baseURL=axiosConfig.preURL||baseURL;}let _createConfig={baseURL,headers:{'Content-Type':'application/json;charset=UTF-8'}};if(typeofaxiosConfig.createConfig==='object'){let {createConfig}=axiosConfig;if(typeofcreateConfig.headers==='object'){_createConfig.headers=Object.assign(_createConfig.headers,createConfig.headers);}_createConfig=Object.assign(_createConfig,createConfig);}const Service=axios.create(_createConfig);Service.interceptors.request.use(config=>{if(typeofaxiosConfig.beforeRequest==='function'){returnaxiosConfig.beforeRequest(config);}elsereturnconfig;},error=>{returnPromise.reject(error);});Service.interceptors.response.use(response=>{if(typeofaxiosConfig.respSuccess==='function'){axiosConfig.respSuccess(response);}returnresponse.data;},error=>{if(error){if(typeofaxiosConfig.respError==='function'){axiosConfig.respError(error);}returnPromise.reject(error.response.data);}});returnService;};
