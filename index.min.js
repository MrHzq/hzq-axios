import Service from './service.js';export default{install(Vue,RC,config={}){if(config.baseURL){let api={};const service=Service(config);RC.keys().forEach(fileName=>{const split=fileName.split(/\//g);let prefix=split.length>2?'/'+split[1]:'';RC(fileName).default.forEach(u=>{let methods=u.methods||'post';api[u.name]=(data,headers={})=>{let params=data||{};if(methods==='get')params={params};return service[methods](prefix+u.url,params,{headers})}})});Vue.$api=api;Vue.prototype.$api=api}else console.error('baseURL为必传参数')}}
